# Структура проекта SAD-pioneer-backend

## Корневая директория
- `readme.md` – общая информация, инструкции по запуску, ссылки на документацию.
- `src/` – основная директория с исходным кодом.

## Директория `src/`

### Файлы в корне `src/`
- `go.mod` – файл модуля Go, определяет зависимости.
- `go.sum` – контрольные суммы зависимостей.
- `main.go` – точка входа в приложение: инициализация подключения к БД, создание зависимостей, запуск HTTP-сервера.

### `internal/` – закрытый код приложения
Код внутри `internal/` организован по функциональным пакетам (доменам). Каждый пакет отвечает за свою предметную область и содержит все необходимые слои.

#### Существующие пакеты

| Пакет          | Назначение                                                                                       |
|----------------|--------------------------------------------------------------------------------------------------|
| `db/`          | Инициализация подключения к базе данных (например, `postgres.go`).                               |
| `user/`        | Всё, что связано с пользователями (модель, хранилище, сервис, обработчики).                      |
| `services/`    | Управление сервисами (эндпоинты GET, PUT, DELETE для `/services`).                               |
| `middleware/`  | Middleware-компоненты: логирование, восстановление после паник (recovery), аутентификация и т.п. |
| `router/`      | Инициализация маршрутизатора (например, с использованием `chi`), регистрация всех обработчиков и middleware. |

#### Структура типичного доменного пакета (на примере `services/`)
```
services/
├── model.go # Модели данных: структуры Service, 
|    запросы/ответыAPI, ошибки домена.
├── storage.go # Интерфейс хранилища и его 
|    реализация (SQL-запросы к БД).
├── service.go # Бизнес-логика: методы, 
|    использующие хранилище, расчёты, валидация.
└── handler.go # HTTP-обработчики: 
    приём запросов, вызов сервиса, возврат JSON.
```
Если пакетов становится слишком много их можно объеденить по общим ФУНКЦИОНАЛЬНЫМ ролям а не техническим 

Пример:
~~~
internal/
├── users/
│   ├── auth/
│   ├── profile/
│   ├── model.go
│   ├── service.go
│   ├── storage.go
│   └── handler.go
├── order/
│   ├── service.go
│   ├── storage.go
│   └── handler.go
├── catalog/
│   ├── product/
│   ├── category/
│   ├── service.go
│   └── storage.go
├── notification/
│   ├── email/
│   ├── sms/
│   └── service.go
├── middleware/
│   ├── auth.go
│   ├── logger.go
│   └── recover.go
└── router/
    └── router.go
~~~